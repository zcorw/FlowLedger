# Flow-Ledger docker-compose environment

# PostgreSQL
POSTGRES_DB=flow_ledger
POSTGRES_USER=flow_ledger
POSTGRES_PASSWORD=flow_ledger
PG_PORT=5432

# API
LOG_LEVEL=info
# Host bind mount for API data (uploads, temp files)
API_DATA_DIR=./data/api
# Upload directory inside the API container
UPLOAD_DIR=/data/uploads
# OpenAI receipt OCR
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_API_URL=https://api.openai.com/v1/responses
OPENAI_TIMEOUT_SECONDS=20
# API_BASE_URL 用于 Bot 访问后端 API 的根路径。
# - 本地（Bot 与 API 同在 docker compose 内）：http://api:8000/v1  （使用服务名 api）
# - 本地（Bot 在宿主机跑，API 在本机端口）：http://localhost:8000/v1
# - 生产（经反向代理的公网地址，需 HTTPS）：https://api.example.com/v1
# 注意：请包含版本前缀 /v1；避免以 / 结尾（避免 // 拼接）。
API_BASE_URL=http://api:8000/v1
API_PORT=8000
BOT_PORT=9080

# Telegram Bot
BOT_TOKEN=REPLACE_WITH_YOUR_BOTFATHER_TOKEN
DEFAULT_LANG=zh-CN
DEFAULT_TIMEZONE=Asia/Shanghai
DEFAULT_CURRENCY=CNY
# Optional: webhook mode and bot state store
WEBHOOK_URL=
WEBHOOK_HOST=0.0.0.0
WEBHOOK_PORT=8081
BOT_STATE_PATH=/app/data/bot_state.json
# Auth (account/password login)
AUTH_SECRET=REPLACE_WITH_STRONG_SECRET
AUTH_ROTATE_ON_STARTUP=false
AUTH_TOKEN_TTL_SECONDS=604800
PASSWORD_HASH_ITERATIONS=200000
# Email verification (SendGrid)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=no-reply@example.com
EMAIL_VERIFICATION_URL=http://localhost:3000/verify-email
EMAIL_VERIFICATION_TOKEN_TTL_SECONDS=86400
SENDGRID_VERIFICATION_TEMPLATE_ID=
EMAIL_VERIFICATION_ENABLED=true
REGISTRATION_DAILY_LIMIT_NO_EMAIL=50

# Unified Database URL for API/Alembic
# - Leave empty to build from POSTGRES_* in docker-compose
# - Override per environment only when needed
DATABASE_URL=

# Admin tools (optional profile: admin)
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=admin
PGADMIN_PORT=8081
